import{C as p,S as g,W as _,P as k,a as v,A as y,E as j,R as w,G as P,b as E,T as z,c as L,d as M,e as S,f as T,M as x,U as D,B,g as F,h as A}from"./vendor.46614709.js";const O=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))t(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&t(r)}).observe(document,{childList:!0,subtree:!0});function s(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerpolicy&&(a.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?a.credentials="include":i.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function t(i){if(i.ep)return;i.ep=!0;const a=s(i);fetch(i.href,a)}};O();class R{constructor(e,s){this.el=e,this.config=Object.assign({scene:"assets/alcom.glb",envMap:"assets/envmap.jpg",fov:50,easing:TWEEN.Easing.Quadratic.InOut,camTransDur:2e3,dev:!1,postProcessing:{glitch:!1,bokeh:!1,bloom:!1}},s),this.init(),this.load(),this.loadEnv(),this.lights(),this.framerate(),this.shadowFloor(),this.postProcessing()}copyCameraPos(){this.camera.position.x,this.camera.position.y,this.camera.position.z,this.camera.rotation.x,this.camera.rotation.y,this.camera.rotation.z,this.camera.fov,this.postProcessing.bokehPass&&(this.postProcessing.bokehPass.materialBokeh.uniforms.focus.value,this.postProcessing.bokehPass.materialBokeh.uniforms.aperture.value)}init(){this.objects={},this.deltaTime=.016,this.clock=new p,this.scene=new g,this.renderer=new _({antialias:!0,alpha:!0}),this.camera=new k(this.config.fov,this.el.clientWidth/this.el.clientHeight,.01,5e3),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=v,this.renderer.toneMapping=y,this.renderer.setSize(this.el.clientWidth,this.el.clientHeight),this.el.appendChild(this.renderer.domElement),this.composer=new j(this.renderer),this.composer.addPass(new w(this.scene,this.camera)),window.addEventListener("resize",e=>{this.camera.aspect=this.el.clientWidth/this.el.clientHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.el.clientWidth,this.el.clientHeight)}),this.clock.start()}load(){new P().load(this.config.scene,s=>{if(s.scene.traverse(t=>{t.isMesh?(t.castShadow=!0,t.receiveShadow=!0,t.material.map&&(t.material.map.anisotropy=16)):t.isLight&&(t.castShadow=!0,t.shadow.bias=-2e-4,t.shadow.mapSize.width=512*8,t.shadow.mapSize.height=512*8,t.shadow.camera.near=1,t.shadow.camera.far=1e3,this.config.dev&&this.scene.add(new E(t)))}),this.scene.add(s.scene),this.grabObjects(),!this.config.dev){const t=this.scene.getObjectByName("dev_floor");t&&(t.visible=!1)}})}loadEnv(){new z().load(this.config.envMap,s=>{const t=new L(s.image.height);t.fromEquirectangularTexture(this.renderer,s),this.scene.environment=t.texture})}lights(){this.ambLight=new M(16777215,.5),this.scene.add(this.ambLight)}shadowFloor(){const e=new S(2e3,2e3);e.rotateX(-Math.PI/2);const s=new T;s.opacity=.2,this.floor=new x(e,s),this.floor.receiveShadow=!0,this.scene.add(this.floor)}postProcessing(){this.config.postProcessing.bloom&&(this.postProcessing.bloomPass=new D({x:this.el.clientWidth,y:this.el.clientHeight},1.5,.5,.85),this.composer.addPass(this.postProcessing.bloomPass)),this.config.postProcessing.bokeh&&(this.postProcessing.bokehPass=new B(this.scene,this.camera,{width:this.el.clientWidth,height:this.el.clientWidth,focus:1,aperture:.015,maxblur:1}),this.composer.addPass(this.postProcessing.bokehPass)),this.config.postProcessing.glitch&&(this.postProcessing.glitchPass=new F,this.composer.addPass(this.postProcessing.glitchPass))}setCameraPos(e){this.currentCameraPos=e,this.camera.position.x=e.x,this.camera.position.y=e.y,this.camera.position.z=e.z,this.camera.rotation.x=e.rx,this.camera.rotation.y=e.ry,this.camera.rotation.z=e.rz,e.focus&&this.postProcessing.bokehPass&&(typeof this.objects[e.focus]!="undefined"?this.postProcessing.bokehPass.materialBokeh.uniforms.focus.value=this.camera.position.distanceTo(this.objects[e.focus].position):isNaN(e.focus)?(console.error("Focus arg is netither an available object nor a number, fail on you!"),console.dir(e.focus)):this.postProcessing.bokehPass.materialBokeh.uniforms.focus.value=e.focus),e.aperture&&this.postProcessing.bokehPass&&(this.postProcessing.bokehPass.materialBokeh.uniforms.aperture.value=e.aperture),e.fov&&(this.camera.fov=e.fov,this.camera.updateProjectionMatrix())}tweenCameraPos(e){const s={x:this.camera.position.x,y:this.camera.position.y,z:this.camera.position.z,rx:this.camera.rotation.x,ry:this.camera.rotation.y,rz:this.camera.rotation.z,fov:this.camera.fov,focus:1,aperture:.025};this.postProcessing.bokehPass&&(s.focus=this.postProcessing.bokehPass.materialBokeh.uniforms.focus.value,s.aperture=this.postProcessing.bokehPass.materialBokeh.uniforms.aperture.value),new TWEEN.Tween(s).to(e,this.config.camTransDur).easing(this.config.easing).start().onUpdate(()=>{this.setCameraPos(s)})}tweenBg(e){this.setBg(e)}setBg(e){this.scene.background=new A(e)}framerate(){this.fpsEl=document.querySelector("[data-fps]"),this.fps=0,this.stableFps=0,this.fpsRounding=.75,this.fpsDips=0,this.fpsThreshold=30,this.fpsDipsThreshold=120,this.trackFps=!0,this.hasInformedFps=!1}trackFramerate(){this.fps=1/this.deltaTime,this.stableFps=this.fpsRounding*this.stableFps+(1-this.fpsRounding)*this.fps,this.config.dev&&(this.fpsEl.textContent=Math.round(this.stableFps)),this.fps<this.fpsThreshold&&this.fpsDips++,this.fpsDips>this.fpsDipsThreshold&&(this.config.dev||(this.trackFps=!1),this.hasInformedFps||(document.body.dispatchEvent(new Event("bg3d/fps-dip")),this.hasInformedFps=!0))}grabObjects(){["flower_enemy","block_brick","block_brick_2","block_question","mushroom","laptop_screen","espresso_crema","globe_holder","compass_arrow","clock_hour_hand","clock_minute_hand","clock_bell_hammer","clock_bell_left","clock_bell_right","skateboard","skateboard_wheel_back_left","skateboard_wheel_front_left","skateboard_wheel_back_right","skateboard_wheel_front_right","r2d2_controller","r2d2_head","camera_lens"].forEach(s=>{const t=this.scene.getObjectByName(s);t&&(t.userData.origPos={x:t.position.x,y:t.position.y,z:t.position.z},t.userData.origRot={x:t.rotation.x,y:t.rotation.y,z:t.rotation.z},this.objects[s]=t)})}animate(){const e=this.clock.getElapsedTime();this.controls&&this.controls.update&&this.controls.update(),this.objects.skateboard&&(this.objects.skateboard.rotation.x=this.objects.skateboard.userData.origRot.x+Math.sin(e*2)/16),this.objects.skateboard_wheel_front_left&&(this.objects.skateboard_wheel_front_left.rotation.z=-(e/2)),this.objects.skateboard_wheel_front_right&&(this.objects.skateboard_wheel_front_right.rotation.z=-(e/3)),this.objects.skateboard_wheel_back_right&&(this.objects.skateboard_wheel_back_right.rotation.z=-e),this.objects.skateboard_wheel_back_left&&(this.objects.skateboard_wheel_back_left.rotation.z=-(e*20)),this.objects.r2d2_controller&&(this.objects.r2d2_controller.rotation.y=-(e/3)),this.objects.r2d2_head&&(this.objects.r2d2_head.rotation.y=this.objects.r2d2_head.userData.origRot.y+Math.sin(e)),this.objects.camera_lens&&(this.objects.camera_lens.rotation.z=this.objects.camera_lens.userData.origRot.z+Math.sin(e)/2,this.objects.camera_lens.position.z=this.objects.camera_lens.userData.origPos.z+Math.sin(e)/16),this.objects.block_brick&&this.objects.block_brick_2&&this.objects.block_question&&(this.objects.block_brick.position.y=this.objects.block_brick.userData.origPos.y+Math.sin(e*2)/500,this.objects.block_question.position.y=this.objects.block_question.userData.origPos.y+Math.sin((e+.5)*2)/500,this.objects.block_brick_2.position.y=this.objects.block_brick.userData.origPos.y+Math.sin((e+1)*2)/500),this.objects.flower_enemy&&(this.objects.flower_enemy.position.y=this.objects.flower_enemy.userData.origPos.y-(Math.sin(e)/15+this.objects.flower_enemy.userData.origPos.y/3),this.objects.flower_enemy.rotation.y=e/2),this.objects.mushroom&&(this.objects.mushroom.position.y=this.objects.mushroom.userData.origPos.y-Math.sin(e)/30,this.objects.mushroom.rotation.y=-(e*4)),this.objects.laptop_screen&&(this.objects.laptop_screen.rotation.x=this.objects.laptop_screen.userData.origRot.x+Math.sin(e/1)/5),this.objects.espresso_crema&&(this.objects.espresso_crema.rotation.y=-(e/4)),this.objects.lamp_head&&(this.objects.lamp_head.rotation.y=this.objects.lamp_head.userData.origRot.y+Math.sin(e/2.5)/4),this.objects.globe_holder&&(this.objects.globe_holder.rotation.y=e/4),this.objects.compass_arrow&&(this.objects.compass_arrow.rotation.y=this.objects.compass_arrow.userData.origRot.y+Math.sin(e)),this.objects.clock_bell_hammer&&(this.objects.clock_bell_hammer.rotation.z=this.objects.clock_bell_hammer.userData.origRot.z+Math.sin(e*35)/2),this.objects.clock_bell_left&&this.objects.clock_bell_right&&(this.objects.clock_bell_left.rotation.z=this.objects.clock_bell_left.userData.origRot.z+Math.sin(e*50)/50,this.objects.clock_bell_right.rotation.z=this.objects.clock_bell_right.userData.origRot.z+Math.sin(e*50)/50),this.objects.clock_minute_hand&&(this.objects.clock_minute_hand.rotation.z=-e),this.objects.clock_hour_hand&&(this.objects.clock_hour_hand.rotation.z=-(e/12)),TWEEN.update()}render(){this.deltaTime=this.clock.getDelta(),this.animate(),this.composer.render(),this.trackFps&&this.trackFramerate()}}const b=new URLSearchParams(window.location.search),l={postProcessing:{glitch:!!b.get("glitch")}};window.bg3d=new R(document.getElementById("bg"),l);var c=!0;function m(){window.bg3d.render(),c&&requestAnimationFrame(m)}m();const f=b.get("beta")?"camera":"cameraPos",C=new IntersectionObserver(o=>o.forEach(e=>{e.isIntersecting&&window.bg3d.tweenCameraPos(JSON.parse(e.target.dataset[f]))}),{threshold:.25});document.querySelectorAll("[data-camera-pos]").forEach((o,e)=>{e===0&&window.bg3d.setCameraPos(JSON.parse(o.dataset[f])),C.observe(o)});(l.postProcessing.bokeh||l.postProcessing.bloom)&&new MutationObserver(e=>{const s=window.getComputedStyle(document.documentElement).getPropertyValue("--body-bg").trim().substr(1);window.bg3d.tweenBg(parseInt(s,16))}).observe(document.documentElement,{attributes:!0,attributeFilter:["class"]});document.querySelectorAll("[data-toggle-bg3d]").forEach(o=>{o.addEventListener("click",e=>{e.preventDefault(),c=!c,c?(document.body.dispatchEvent(new Event("bg3d/enabled")),document.documentElement.classList.remove("bg3d-disabled"),requestAnimationFrame(m)):(document.body.dispatchEvent(new Event("bg3d/disabled")),document.documentElement.classList.add("bg3d-disabled"))})});document.body.addEventListener("bg3d/fps-dip",()=>{document.getElementById("performance-notice").classList.add("active")});document.body.addEventListener("bg3d/disabled",()=>{document.getElementById("performance-notice").classList.remove("active")});Splitting({target:"h1, h2",by:"chars"});const I=new IntersectionObserver(o=>o.forEach(e=>{e.isIntersecting?e.target.classList.add("in-view"):e.target.classList.remove("in-view")}),{threshold:.25});document.querySelectorAll("section").forEach(o=>{I.observe(o)});var u=!0;const n=[],d=document.querySelectorAll("[data-set-theme]");d.forEach(o=>{const e=o.dataset.setTheme;n.push(e),document.documentElement.classList.contains("theme-"+e)&&o.classList.add("active"),o.addEventListener("click",s=>{s.x!==0&&s.y!==0&&(u=!1),n.forEach(t=>document.documentElement.classList.remove("theme-"+t)),d.forEach(t=>t.classList.remove("active")),document.documentElement.classList.add("theme-"+e),o.classList.add("active")})});const q=new IntersectionObserver(o=>o.forEach(e=>{if(e.isIntersecting&&u){var s=e.target.dataset.autoTheme;s==="random"&&(s=n[Math.floor(Math.random()*n.length)]);const t=Array.from(d).filter(i=>i.dataset.setTheme===s);t&&t[0].click()}}),{threshold:.25});document.querySelectorAll("[data-auto-theme]").forEach(o=>{q.observe(o)});document.querySelectorAll("[data-highlight-visible]").forEach(o=>{const e=o.querySelectorAll('a[href^="#"]'),s=document.querySelectorAll(Array.from(e).map(i=>i.getAttribute("href")).join(", ")),t=new IntersectionObserver(i=>i.forEach(a=>{const r=Array.from(e).filter(h=>h.getAttribute("href")==="#"+a.target.id)[0];a.isIntersecting?(e.forEach(h=>h.classList.remove("active")),r.classList.add("active")):r.classList.remove("active")}),{threshold:.25});s.forEach(i=>t.observe(i))});document.documentElement.classList.add("loaded");
